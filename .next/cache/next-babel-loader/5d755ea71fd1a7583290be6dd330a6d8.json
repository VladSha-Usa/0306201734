{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _JSXStyle from \"styled-jsx/style\";\nimport React from \"react\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { Formik, Form, Field } from \"formik\";\nimport * as Yup from \"yup\";\nimport { useEffect, useState } from \"react\";\nimport fetch from \"isomorphic-unfetch\";\nvar SignupSchema = Yup.object().shape({\n  name: Yup.string().min(2, \"Очень короткое имя\").max(50, \"Очень длинное имя\").required(\"Поле не может быть пустым\"),\n  textOfFeedback: Yup.string().min(0, \"Очень короткий отзыв\").max(300, \"Очень длинный отзыв\").required(\"Поле не может быть пустым\")\n});\n\nvar form = function form() {\n  var _useState = useState(false),\n      isSubmitting = _useState[0],\n      setIsSubmitting = _useState[1];\n\n  var _useState2 = useState(),\n      form = _useState2[0],\n      setForm = _useState2[1];\n\n  useEffect(function () {\n    addEventListener(\"keydown\", function (e) {\n      e.keyCode === 13 && e.ctrlKey ? document.querySelector(\".form-btn\").click() : null;\n    });\n\n    if (isSubmitting) {\n      sendFeedback();\n      setIsSubmitting(!isSubmitting);\n      setTimeout(function () {\n        return location.reload(true);\n      }, 200);\n    }\n  });\n\n  var sendFeedback = function sendFeedback() {\n    var res;\n    return _regeneratorRuntime.async(function sendFeedback$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.prev = 0;\n            _context.next = 3;\n            return _regeneratorRuntime.awrap(fetch(\"http://localhost:3000/api/notes\", {\n              method: \"POST\",\n              headers: {\n                Accept: \"application/json\",\n                \"Content-Type\": \"application/json\"\n              },\n              body: JSON.stringify(_objectSpread({}, form, {\n                date: new Date().toLocaleString(\"ru\", {\n                  day: \"numeric\",\n                  month: \"long\",\n                  year: \"numeric\"\n                }).replace(/\\s*г\\./, \"\"),\n                timeInMilliseconds: Date.UTC(new Date().getFullYear(), new Date().getMonth() + 1, new Date().getDate(), 0, 0, 0)\n              }))\n            }));\n\n          case 3:\n            res = _context.sent;\n            _context.next = 9;\n            break;\n\n          case 6:\n            _context.prev = 6;\n            _context.t0 = _context[\"catch\"](0);\n            console.log(_context.t0);\n\n          case 9:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, [[0, 6]], Promise);\n  };\n\n  return __jsx(React.Fragment, null, __jsx(Formik, {\n    initialValues: {\n      name: \"\",\n      textOfFeedback: \"\"\n    },\n    validationSchema: SignupSchema,\n    onSubmit: function _callee(values) {\n      return _regeneratorRuntime.async(function _callee$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.next = 2;\n              return _regeneratorRuntime.awrap(new Promise(function (resolve) {\n                return setTimeout(resolve, 500);\n              }));\n\n            case 2:\n              setForm(values);\n              setIsSubmitting(!isSubmitting);\n\n            case 4:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    }\n  }, function (_ref) {\n    var errors = _ref.errors,\n        touched = _ref.touched,\n        values = _ref.values;\n    return __jsx(Form, {\n      className: \"form\"\n    }, __jsx(\"div\", {\n      className: \"jsx-2045612794\" + \" \" + \"row\"\n    }, __jsx(Field, {\n      name: \"name\",\n      className: \"form-input-name\",\n      placeholder: \"\\u0418\\u043C\\u044F\",\n      type: \"text\"\n    }), errors.name && touched.name ? __jsx(\"div\", {\n      className: \"jsx-2045612794\" + \" \" + \"error\"\n    }, errors.name) : null), __jsx(\"div\", {\n      className: \"jsx-2045612794\" + \" \" + \"row\"\n    }, __jsx(Field, {\n      name: \"textOfFeedback\",\n      as: \"textarea\",\n      className: \"form-textarea\",\n      placeholder: \"\\u041E\\u0442\\u0437\\u044B\\u0432\",\n      type: \"text\",\n      value: values.textOfFeedback || \"\"\n    }), errors.textOfFeedback && touched.textOfFeedback ? __jsx(\"div\", {\n      className: \"jsx-2045612794\" + \" \" + \"error\"\n    }, errors.textOfFeedback) : null), __jsx(\"button\", {\n      type: \"submit\",\n      className: \"jsx-2045612794\" + \" \" + \"form-btn\"\n    }, \"\\u041D\\u0430\\u043F\\u0438\\u0441\\u0430\\u0442\\u044C \\u043A\\u043E\\u043D\\u0441\\u0443\\u043B\\u044C\\u0442\\u0430\\u043D\\u0442\\u0443\"));\n  }), __jsx(_JSXStyle, {\n    id: \"1947735990\"\n  }, [\".form-btn.jsx-2045612794{width:62%;min-height:43px;background:#fdd639;border-radius:23px;border:none;outline:none;font-weight:600;font-size:22px;line-height:21px;cursor:pointer;padding:15px 0px;-webkit-align-self:center;-ms-flex-item-align:center;align-self:center;}\", \".error.jsx-2045612794{font-family:\\\"Open Sans\\\",sans-serif;color:red;}\", \".row.jsx-2045612794{margin-bottom:23px;width:100%;padding:0;}\", \"@media only screen and (max-width:660px){.form-btn.jsx-2045612794{font-size:20px;line-height:18px;}}\", \"@media only screen and (max-width:600px){.form-btn.jsx-2045612794{font-size:18px;line-height:17px;}}\", \"@media only screen and (max-width:540px){.row.jsx-2045612794{margin-bottom:18px;}.form-btn.jsx-2045612794{font-size:16px;line-height:17px;padding:15px 15px;}}\"]), __jsx(_JSXStyle, {\n    id: \"3752577861\"\n  }, [\".form{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;padding-top:28px;padding-bottom:34px;}\", \".form-input-name,.form-textarea{background:#ffffff;border:1px solid #000000;border-radius:1px;outline:none;width:100%;padding:0 20px;box-sizing:border-box;font-size:20px;}\", \".form-input-name{height:50px;}\", \".form-textarea{height:100px;resize:none;padding:10px 20px;box-sizing:border-box;}\", \".row textarea{font-size:20px;font-family:\\\"Open Sans\\\",sans-serif;}\", \"::-webkit-input-placeholder{font-size:20px;color:#808080;font-family:\\\"Open Sans\\\",sans-serif;}\", \"::-moz-placeholder{font-size:20px;color:#808080;font-family:\\\"Open Sans\\\",sans-serif;}\", \":-moz-placeholder{font-size:20px;color:#808080;font-family:\\\"Open Sans\\\",sans-serif;}\", \":-ms-input-placeholder{font-size:20px;color:#808080;font-family:\\\"Open Sans\\\",sans-serif;}\", \"@media only screen and (max-width:660px){.row textarea{font-size:18px;}::-webkit-input-placeholder{font-size:18px;}::-moz-placeholder{font-size:18px;}:-moz-placeholder{font-size:18px;}:-ms-input-placeholder{font-size:18px;}.form-input-name,.form-textarea{font-size:18px;}}\", \"@media only screen and (max-width:600px){.row textarea{font-size:16px;}::-webkit-input-placeholder{font-size:16px;}::-moz-placeholder{font-size:16px;}:-moz-placeholder{font-size:16px;}:-ms-input-placeholder{font-size:16px;}.form-input-name,.form-textarea{font-size:16px;}}\", \"@media only screen and (max-width:540px){.form-input-name{height:30px;}.form-textarea{height:80px;padding:10px 20px;box-sizing:border-box;}.row textarea{font-size:14px;}::-webkit-input-placeholder{font-size:14px;}::-moz-placeholder{font-size:14px;}:-moz-placeholder{font-size:14px;}:-ms-input-placeholder{font-size:14px;}.form-input-name,.form-textarea{font-size:14px;}}\"]));\n};\n\nexport default form;","map":null,"metadata":{},"sourceType":"module"}